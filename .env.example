# Runtime
NODE_ENV=development
IM_SERVER_NAME=localhost
IM_PORT=3000
IM_HOST=0.0.0.0
IM_COOKIE_SECRET=dev-cookie-secret
IM_CORS_ORIGINS=*
IM_LOG_FORMAT=cli
IM_LOG_LEVEL=debug

# Upstream OIDC provider
# Production: IM_OIDC_ISSUER=https://login.gid.io/oidc
# Local Dex IdP (use with `docker compose --profile dex up -d`):
IM_OIDC_ISSUER=http://localhost:5556/dex
IM_OIDC_CLIENT_ID=gim
IM_OIDC_CLIENT_SECRET=gim-dev-secret

# Database
DB_PATH=data/gim.db

# Cache: 'memory' (default) or 'redis'
IM_CACHE_DRIVER=memory
# Account token cache max ttl (seconds)
IM_ACCOUNT_TOKEN_CACHE_MAX_TTL_SEC=7200
# Account token validity period (seconds, 0 = never expire)
IM_ACCOUNT_TOKEN_VALIDITY_SEC=0
# OAuth access token cache max ttl (seconds)
IM_OAUTH_ACCESS_TOKEN_CACHE_MAX_TTL_SEC=3600
REDIS_URL=redis://localhost:6379

# Example/test base URL
GIM_URL=http://localhost:3000

# Room limits (0 = unlimited)
IM_MAX_ROOM_MEMBERS=0
IM_MAX_ROOMS_PER_USER=0

# Media limits (0 = unlimited)
IM_MEDIA_QUOTA_MB=0
IM_MEDIA_UPLOADS_PER_HOUR=0

# AppService registrations
IM_AS_REGISTRATION_DIR=data/appservices

# Push gateway: server default so clients only need pushkey
# IM_PUSH_GATEWAY_URL=https://push.example.com

# TURN (optional, VoIP)
# IM_TURN_URIS=turn:turn.example.com:3478?transport=udp,turns:turn.example.com:5349?transport=tcp
# IM_TURN_SHARED_SECRET=replace-me
IM_TURN_TTL=86400

# LiveKit/MatrixRTC (optional)
# IM_LIVEKIT_SERVICE_URL=https://livekit-jwt.call.matrix.org/livekit/jwt

# E2EE signature verification strict mode (optional)
# IM_E2EE_STRICT_SIGNATURE_VERIFY=true
# IM_STRICT_DEVICE_KEY_SIGNATURE_VERIFY=true

# E2EE room key backup API (optional, default disabled)
# IM_E2EE_KEY_BACKUP_ENABLED=true

# S3/R2 object storage (optional â€” falls back to local disk)
S3_ACCOUNT_ID=
S3_BUCKET_NAME=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_REGION=auto
S3_PUBLIC_URL=
